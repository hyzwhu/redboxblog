hello，大家好，我们直接切入正题，今天来讨论一下如何使用red语言制作一款简单的推箱子游戏。<br>
首先，我们来看下推箱子游戏。<br>
1.看完之后想必大家以及对这个游戏有个大致的了解了。那么好的，我们开始进入准备环节，俗话说得好，巧妇难为无米之炊。我们接下来的准备工作便是选好关卡地图的设置文件以及人物的动作图片，墙，地，目标位置，箱子的图片。<br>
```red
load-bin: func [file][reduce load decompress read/binary file]
maps: load-bin %data1.txt.gz'
```
<br>
ok,我们先来看下如上的代码实现了什么功能。load-bin方法的主要步骤：<br>
1⃣️使用read/binary 方法将文件读取到red中来。
2⃣️使用decompress解压缩方法将该文件（这里提供的是.gz压缩文件）解压缩。
3⃣️使用load方法将decompress出来的二进制码转换成block：<br>
```red
[
    make object! [
        start: 8x7 
        boxes: [7x6 9x6 7x7 8x8] 
        map: ["^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@" "^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@" "^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@" "^@^@^@^@^@^@^A^A^A^@^@^@^@^@^@^@" "^@^@^@^@^@^@^A^C^A^@^@^@^@^@^@^@" "^@^@^@^@^@^@^A^B^A^A^A^A^@^@^@^@" "^@^@^@^@^A^A^A^B^B^B^C^A^@^@^@^@" "^@^@^@^@^A^C^B^B^B^A^A^A^@^@^@^@" "^@^@^@^@^A^A^A^A^B^A^@^@^@^@^@^@" "^@^@^@^@^@^@^@^A^C^A^@^@^@^@^@^@" "^@^@^@^@^@^@^@^A^A^A^@^@^@^@^@^@" "^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@" "^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@" "^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@"]
    ]
    ... 
```
<br>
4⃣️以上是一个load之后的block片段，但是这个block只存在于形而不存在于神，需要使用reduce方法来执行这个block中的代码，使其成为真正的键对值形式。（其实此时你可以从上面的代码隐隐约约看到地图的轮廓）
2.好，接下来我们就开始制作游戏了，在做游戏的过程中我们应该在大脑中有个具体的思路（第一步做什么，接下来做什么，之后做什么），很明显，我们首先应该做的就是绘制地图。<br>
3.ok，通过上面的步骤我们已经可以看到地图已经出现了，那么我们此时可以加入小人了，从图片中抽取出小人的编码后将其显示在地图上。<br>
4.小人成功上图，此时应该是建立小人和键盘之间的联系，即使用上下左右键控制小人的移动。<br>
5.可以看到小人以及能够在图上自由的移动了，那么接下来我们应该思考小人在地图上的移动是不是有限制的呢？答案是肯定的，小人在遇到墙体的时候是不能移动的。<br>
6.好了，给小人加上限制之后，小人就被关在了地图里了。emmmm，我们这个游戏叫做推箱子游戏。所以当然要加上箱子了。<br>
7.加入箱子后，我们此时应该想一下箱子的逻辑，即小人推箱子时，若下一个点是墙体则推不动，若下一个地点是空地，则可以推动。<br>
8.箱子可以推起来了！那么思考一下游戏胜利的方式便是将所有箱子移动到指定的目标点。所以此时加入箱子坐标与目标点重合时胜利的逻辑以及之后弹出关卡胜利窗口的功能。<br>
9.好，第一关已经制作完毕，那么接下来我们应该加入更多的图片，想一想我们之前准备的关卡地图文件已经被读入了一个block里了，所以此时我们只需要将索引指向下一关卡即可使用red语言重新绘制关卡地图。<br>
10.此时已经完成了大部分的工作了，你可以操作小人推动箱子，并且在所有箱子与目标点重合的时候弹出关卡胜利窗口，当你点击确定的时候则自动跳到下一关卡。那么接下来的工作便是精装修啦！首先看到图片文件中小人的图片不止一个，也可以看到例子gif中小人的动作会随着时间的改变，方向的改变而切换。<br>
11.小人活了！可能你在玩的时候会想，前面的关卡都太简单了，要来一些有难度的。所以是不是应该加入直选关卡的功能呢？好！现在加入直选关卡的功能。<br>
12.可能你会在玩的时候由于操作太快刹不了车了，多走出了一步怎么办？没关系我们可以加上undo即撤销功能。看下功能如何实现，即每一步键盘操作小人的时候都将上一步的小人和箱子的坐标记录到block里面，当然你也可以分开记录（这只是一种存储手段）。<br>
13.上面的撤销功能只能撤销一步，那么若是多走了n步怎么办呢？那么我们只能重新开始该关卡了。重新开始即重新读入图片指定的关卡位置即可。<br>
14.单纯是完成游戏太没有挑战性了！于是乎我们注意到了例子gif中的最下面的那一行状态栏，加入当前步数（这里指的是箱子移动的步数）。加入最佳步数（即移动的最少的步数）。加入当前关卡的索引。<br>
15.好了，完成了上面的步骤后我们便成功的使用red语言制作了一款简单的推箱子游戏了，可谓是居家旅行必备良品啊！<br>